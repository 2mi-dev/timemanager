databaseChangeLog:
  - property:
      name: now
      value: now()
      dbms: mysql,h2
  - property:
      name: now
      value: current_timestamp
      dbms: postgresql
  - property:
      name: now
      value: sysdate
      dbms: oracle
  - property:
      name: now
      value: getdate()
      dbms: sqlserver
  - changeSet:
      id: 1
      author: luhuiguo
      dbms: h2,postgresql,oracle
      changes:
        - createSequence:
            sequenceName: hibernate_sequence
            startValue: 1000
            incrementBy: 1
  - changeSet:
      id: 2
      author: luhuiguo
      dbms: mysql,sqlserver
      changes:
        - createTable:
            tableName: hibernate_sequence
            columns:
              - column:
                  name: next_val
                  type: bigint
                  constraints:
                    primaryKey: true
                    primaryKeyName: pk_hibernate_sequence
                    nullable: false
        - insert:
            tableName: hibernate_sequence
            columns:
              - column:
                  name: next_val
                  value: 1000
  - changeSet:
      id: 3
      author: luhuiguo
      changes:
        - createTable:
            tableName: users
            remarks: 用户
            columns:
              - column:
                  name: id
                  type: bigint
                  remarks: 用户标识
                  constraints:
                    primaryKey: true
                    primaryKeyName: pk_users
                    nullable: false
              - column:
                  name: username
                  type: nvarchar(50)
                  remarks: 用户名
                  constraints:
                    unique: true
                    uniqueConstraintName: ux_users_username
                    nullable: false
              - column:
                  name: password
                  type: nvarchar(100)
                  remarks: 密码
              - column:
                  name: nickname
                  type: nvarchar(50)
                  remarks: 昵称
              - column:
                  name: name
                  type: nvarchar(50)
                  remarks: 姓名
              - column:
                  name: email
                  type: nvarchar(255)
                  remarks: 邮箱
                  constraints:
                    unique: true
                    uniqueConstraintName: ux_users_email
              - column:
                  name: phone
                  type: nvarchar(255)
                  remarks: 电话
              - column:
                  name: avatar
                  type: nvarchar(255)
                  remarks: 头像
              - column:
                  name: lang_key
                  type: nvarchar(20)
                  defaultValue: zh-CN
                  remarks: 语言
              - column:
                  name: activated
                  type: boolean
                  defaultValueBoolean: false
                  remarks: 是否激活
              - column:
                  name: activation_key
                  type: nvarchar(255)
                  remarks: 激活验证码
              - column:
                  name: reset_key
                  type: nvarchar(255)
                  remarks: 密码重置验证码
              - column:
                  name: reset_date
                  type: timestamp
                  remarks: 密码重置时间
              - column:
                  name: enabled
                  type: boolean
                  defaultValueBoolean: true
                  remarks: 是否可用
              - column:
                  name: created_by
                  type: nvarchar(50)
                  defaultValue: system
                  remarks: 创建者
                  constraints:
                    nullable: false
              - column:
                  name: created_date
                  type: timestamp
                  defaultValueDate: ${now}
                  remarks: 创建时间
                  constraints:
                    nullable: false
              - column:
                  name: last_modified_by
                  type: nvarchar(50)
                  remarks: 最后修改者
              - column:
                  name: last_modified_date
                  type: timestamp
                  remarks: 最后修改时间
        - createIndex:
            indexName: idx_users_username
            tableName: users
            unique: true
            columns:
              - column:
                  name: username
        - createIndex:
            indexName: idx_users_email
            tableName: users
            unique: true
            columns:
              - column:
                  name: email

        - insert:
            tableName: users
            columns:
              - column:
                  name: id
                  valueNumeric: 1
              - column:
                  name: username
                  value: system
              - column:
                  name: password
                  value: $2a$10$mE.qmcV0mFU5NcKh73TZx.z4ueI/.bDWbj0T1BYyqP481kGGarKLG
              - column:
                  name: nickname
                  value: System
              - column:
                  name: name
                  value: System
              - column:
                  name: email
                  value: system@domain.com
              - column:
                  name: activated
                  valueBoolean: true
        - insert:
            tableName: users
            columns:
              - column:
                  name: id
                  valueNumeric: 2
              - column:
                  name: username
                  value: anonymous
              - column:
                  name: password
                  value: $2a$10$j8S5d7Sr7.8VTOYNviDPOeWX8KcYILUVJBsYV83Y5NtECayypx9lO
              - column:
                  name: nickname
                  value: Anonymous
              - column:
                  name: name
                  value: Anonymous
              - column:
                  name: email
                  value: anonymous@domain.com
              - column:
                  name: activated
                  valueBoolean: true
        - insert:
            tableName: users
            columns:
              - column:
                  name: id
                  valueNumeric: 3
              - column:
                  name: username
                  value: admin
              - column:
                  name: password
                  value: $2a$10$gSAhZrxMllrbgj/kkK9UceBPpChGWJA7SYIb1Mqo.n5aNLq1/oRrC
              - column:
                  name: nickname
                  value: Administrator
              - column:
                  name: name
                  value: Administrator
              - column:
                  name: email
                  value: admin@domain.com
              - column:
                  name: activated
                  valueBoolean: true
        - insert:
            tableName: users
            columns:
              - column:
                  name: id
                  valueNumeric: 4
              - column:
                  name: username
                  value: user
              - column:
                  name: password
                  value: $2a$10$VEjxo0jq2YG9Rbk2HmX9S.k1uZBGYUHdUcid3g/vfiEl7lwWgOH/K
              - column:
                  name: nickname
                  value: User
              - column:
                  name: name
                  value: User
              - column:
                  name: email
                  value: user@domain.com
              - column:
                  name: activated
                  valueBoolean: true

        - createTable:
            tableName: authorities
            remarks: 权限
            columns:
              - column:
                  name: user_id
                  type: bigint
                  remarks: 用户标识
                  constraints:
                    nullable: false
              - column:
                  name: authority
                  type: nvarchar(255)
                  remarks: 授权
                  constraints:
                    nullable: false
        - addPrimaryKey:
            constraintName: pk_authorities
            tableName: authorities
            columnNames: user_id,authority
        - addForeignKeyConstraint:
            constraintName: fk_user_authorities
            baseColumnNames: user_id
            baseTableName: authorities
            referencedColumnNames: id
            referencedTableName: users
        - insert:
            tableName: authorities
            columns:
              - column:
                  name: user_id
                  valueNumeric: 1
              - column:
                  name: authority
                  value: ROLE_ADMIN
        - insert:
            tableName: authorities
            columns:
              - column:
                  name: user_id
                  valueNumeric: 1
              - column:
                  name: authority
                  value: ROLE_USER
        - insert:
            tableName: authorities
            columns:
              - column:
                  name: user_id
                  valueNumeric: 3
              - column:
                  name: authority
                  value: ROLE_ADMIN
        - insert:
            tableName: authorities
            columns:
              - column:
                  name: user_id
                  valueNumeric: 3
              - column:
                  name: authority
                  value: ROLE_USER
        - insert:
            tableName: authorities
            columns:
              - column:
                  name: user_id
                  valueNumeric: 4
              - column:
                  name: authority
                  value: ROLE_USER
  - changeSet:
      id: 4
      author: luhuiguo
      changes:
        - createTable:
            tableName: persistent_audit_event
            remarks: 审计事件
            columns:
              - column:
                  name: event_id
                  type: bigint
                  remarks: 审计序号
                  constraints:
                    primaryKey: true
                    primaryKeyName: pk_persistent_audit_event
                    nullable: false
              - column:
                  name: principal
                  type: nvarchar(255)
                  remarks: 身份
                  constraints:
                    nullable: false
              - column:
                  name: event_date
                  type: timestamp
                  remarks: 审计时间
              - column:
                  name: event_type
                  type: nvarchar(255)
                  remarks: 审计类型
        - createIndex:
            indexName: idx_persistent_audit_event
            tableName: persistent_audit_event
            unique: false
            columns:
              - column:
                  name: principal
              - column:
                  name: event_date
        - createTable:
            tableName: persistent_audit_event_data
            remarks: 审计事件数据
            columns:
              - column:
                  name: event_id
                  type: bigint
                  remarks: 审计序号
                  constraints:
                    nullable: false
              - column:
                  name: name
                  type: nvarchar(255)
                  remarks: 数据名
                  constraints:
                    nullable: false
              - column:
                  name: value
                  type: nvarchar(255)
                  remarks: 数据值
        - addPrimaryKey:
            constraintName: pk_persistent_audit_event_data
            tableName: persistent_audit_event_data
            columnNames: event_id,name
        - addForeignKeyConstraint:
            constraintName: fk_persistent_audit_event_data
            baseColumnNames: event_id
            baseTableName: persistent_audit_event_data
            referencedColumnNames: event_id
            referencedTableName: persistent_audit_event
        - createIndex:
            indexName: idx_persistent_audit_event_data
            tableName: persistent_audit_event_data
            unique: false
            columns:
              - column:
                  name: event_id
